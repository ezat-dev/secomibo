<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="standard">


	<!-- 침탄로작업표준 목록 조회 -->
	<select id="getChimStandardList" parameterType="standard"
		resultType="standard">
		select ROW_NUMBER()OVER(ORDER BY CORP_NAME, PROD_NAME, PROD_NO) AS
		ROW_NUM ,
		CORP_NAME,
		PROD_NAME,
		PROD_GYU,
		PROD_NO,
		PROD_JAI,
		FAC_NAME,
		TECH_TE,
		WSTD_CODE,
		TECH_NO,
		PROD_DANJ,
		PROD_DANG,
		PROD_KIJONG,
		PROD_PG,
		PROD_PG1,
		PROD_PG2,
		PROD_SG,
		PROD_SG1,
		PROD_SG2,
		PROD_E1,
		Wstd_chim_file_name1,
		Wstd_chim_file_name2
		FROM vworkstd
		where 1=1
		<!-- <if test='wstd_gubn == "B"'>
			and WSTD_GUBN = 'B'
		</if>
		<if test='wstd_gubn == "P"'>
			and WSTD_GUBN = 'P'
		</if>
		<if test='wstd_gubn == "V"'>
			and WSTD_GUBN = 'V'
		</if>
		<if test='wstd_gubn == "S"'>
			and WSTD_GUBN = 'S'
		</if>
		<if test='wstd_gubn == "H"'>
			and WSTD_GUBN = 'H'
		</if>
		<if test='wstd_gubn == "J"'>
			and WSTD_GUBN = 'J'
		</if>
		<if test='wstd_gubn == "Y"'>
			and WSTD_GUBN = 'Y'
		</if>
		<if test='corp_name != null and corp_name != ""'>
			AND CORP_NAME LIKE CONCAT('%', #{corp_name}, '%')
		</if>
		<if test='prod_name != null and prod_name != ""'>
			AND PROD_NAME LIKE CONCAT('%', #{prod_name}, '%')
		</if>
		<if test='prod_no != null and prod_no != ""'>
			AND PROD_NO LIKE CONCAT('%', #{prod_no}, '%')
		</if>
		<if test='fac_name != null and fac_name != ""'>
			AND FAC_NAME LIKE CONCAT('%', #{fac_name}, '%')
		</if> -->
		order by CORP_NAME, PROD_NAME, PROD_NO
	</select>
	
	<select id="getChimStandardDetail" parameterType="standard" resultType="standard">
		SELECT  WORKSTD.*, FACILITY.*, vProduct.*, 
		vProduct.PROD_E1 +' '+ PROD_E2 AS PROD_E1,
		vProduct.PROD_E3 + ' ' +PROD_E4 AS PROD_E3,
		vProduct.PROD_PGS + ' ' + PROD_PGS1 + '~' + PROD_PGS2 AS PROD_PGS,--실측치 표면경도
		WORKSTD.WSTD_READY + 'x' + dbo.WORKSTD.WSTD_WORKTIME + 'x AC' AS TEMPERING
		FROM dbo.WORKSTD 
			INNER JOIN dbo.vProduct ON dbo.WORKSTD.PROD_CODE = dbo.vProduct.PROD_CODE 
			INNER JOIN dbo.FACILITY ON dbo.WORKSTD.FAC_CODE = dbo.FACILITY.FAC_CODE 
		WHERE WSTD_CODE = #{wstd_code}
	</select>
	
	<insert id="chimStandardInsertSave" parameterType="standard">
    	INSERT 
		  INTO WORKSTD 
		       ( 
		           WSTD_CODE, 
		           PROD_CODE, 
		           WSTD_G25, 
		           WSTD_G26, 
		           WSTD_G27, 
		           WSTD_G33, 
		           WSTD_T11, 
		           WSTD_T12, 
		           WSTD_T13, 
		           WSTD_T14, 
		           WSTD_T21, 
		           WSTD_T22, 
		           WSTD_T23, 
		           WSTD_T24,
		           WSTD_T30, 
		           WSTD_T31, 
		           WSTD_T32, 
		           WSTD_T33, 
		           WSTD_T34, 
		           WSTD_N05, 
		           WSTD_N06, 
		           WSTD_N07, 
		           WSTD_WORKNOTE, 
		           WSTD_T40, 
		           WSTD_T41, 
		           WSTD_T42, 
		           WSTD_T43, 
		           WSTD_T44, 
		           WSTD_T50, 
		           WSTD_T51, 
		           WSTD_T52, 
		           WSTD_T53, 
		           WSTD_T54, 
		           WSTD_N08, 
		           WSTD_T55, 
		           WSTD_T56, 
		           WSTD_T57, 
		           WSTD_T58, 
		           WSTD_T59, 
		           WSTD_T60, 
		           WSTD_T61, 
		           WSTD_READY, 
		           WSTD_WORKTIME, 
		           WSTD_T62, 
		           WSTD_T63, 
		           WSTD_T64, 
		           WSTD_T65, 
		           WSTD_N01, 
		           WSTD_N02, 
		           WSTD_T66, 
		           WSTD_N03, 
		           WSTD_N04, 
		           WSTD_T67, 
		           WSTD_G11, 
		           WSTD_G12, 
		           WSTD_G21, 
		           WSTD_G22, 
		           WSTD_G31, 
		           WSTD_G32, 
		           WSTD_G41, 
		           WSTD_G42, 
		           WSTD_T68, 
		           WSTD_T69, 
		           WSTD_T70, 
		           WSTD_T71, 
		           WSTD_T72, 
		           WSTD_T73,
				   WSTD_GUBN,
				   FAC_CODE,
				   REPORT_TYPE,
				   WSTD_NH3,
				   WSTD_T74,
				   WSTD_T75,
				   WSTD_T76,
				   WSTD_T77,
				   WSTD_TBD,
				   WSTD_TTT,
				   WSTD_TIG,
				   WSTD_THJ,
					  WSTD_GJ11,
					  WSTD_GJ12,
					  WSTD_GJ13,
					  WSTD_GJ14,
					  WSTD_GJ15,
					  WSTD_GJ16,
					  WSTD_GJ17,
					  WSTD_GJ18,
					  WSTD_GJ21,
					  WSTD_GJ22,
					  WSTD_GJ23,
					  WSTD_GJ24,
					  WSTD_GJ25,
					  WSTD_GJ26,
					  WSTD_GJ27,
					  WSTD_GJ28,
					  WSTD_GJ31,
					  WSTD_GJ32,
					  WSTD_GJ33,
					  WSTD_GJ34,
					  WSTD_GJ35,
					  WSTD_GJ36,
					  WSTD_GJ37,
					  WSTD_GJ38,
					  WSTD_GJ42,
					  WSTD_GJ43,
					  WSTD_GJ52,
					  WSTD_GJ53,
					  WSTD_GJ62,
					  WSTD_GJ63,
					  WSTD_GJ72,
					  WSTD_GJ73,
					  WSTD_GJ82,
					  WSTD_GJ83,
					  WSTD_GJSu,
					  WSTD_GJRpm,			
				      WSTD_GJ97,			
				      WSTD_GJ98,			
				      WSTD_GJ99,			
				      WSTD_GJ100,			
				      WSTD_GJ101,
				      FAC_CODE1,
				      FAC_CODE2,
				      WSTD_T87,
				      WSTD_GJ39,
				      WSTD_GJ44,
				      WSTD_GJ45,
				      WSTD_GJ49,
				      WSTD_GJ54,
				      WSTD_GJ55,
				      WSTD_GJ59,
				      WSTD_GJ64,
				      WSTD_GJ65,
				      WSTD_GJ69,
				      WSTD_GJ74,
				      WSTD_GJ75,
				      WSTD_GJ79,
				      WSTD_GJ84,
				      WSTD_GJ85,
				      FAC_CODE3,
				      WSTD_CHIM_FILE_NAME1,
				      WSTD_CHIM_FILE_NAME2
				      
		       ) 
		       VALUES 
		       ( 
		              (SELECT ISNULL(MAX(WSTD_CODE), 0)+1 
		                FROM WORKSTD 
		              ), 
		              #{prod_code}, 
		              #{wstd_g25}, 
		              #{wstd_g26}, 
		              #{wstd_g27}, 
		              #{wstd_g33}, 
		              #{wstd_t11}, 
		              #{wstd_t12}, 
		              #{wstd_t13}, 
		              #{wstd_t14}, 
		              #{wstd_t21}, 
		              #{wstd_t22}, 
		              #{wstd_t23}, 
		              #{wstd_t24}, 
		              #{wstd_t31}, 
		              #{wstd_t30}, 
		              #{wstd_t32}, 
		              #{wstd_t33}, 
		              #{wstd_t34}, 
		              #{wstd_n05}, 
		              #{wstd_n06}, 
		              #{wstd_n07}, 
		              #{wstd_worknote}, 
		              #{wstd_t40}, 
		              #{wstd_t41}, 
		              #{wstd_t42}, 
		              #{wstd_t43}, 
		              #{wstd_t44}, 
		              #{wstd_t50}, 
		              #{wstd_t51}, 
		              #{wstd_t52}, 
		              #{wstd_t53}, 
		              #{wstd_t54}, 
		              #{wstd_n08}, 
		              #{wstd_t55}, 
		              #{wstd_t56}, 
		              #{wstd_t57}, 
		              #{wstd_t58}, 
		              #{wstd_t59}, 
		              #{wstd_t60}, 
		              #{wstd_t61}, 
		              #{wstd_ready}, 
		              #{wstd_worktime}, 
		              #{wstd_t62}, 
		              #{wstd_t63}, 
		              #{wstd_t64}, 
		              #{wstd_t65}, 
		              #{wstd_n01}, 
		              #{wstd_n02}, 
		              #{wstd_t66}, 
		              #{wstd_n03}, 
		              #{wstd_n04}, 
		              #{wstd_t67}, 
		              #{wstd_g11}, 
		              #{wstd_g12}, 
		              #{wstd_g21}, 
		              #{wstd_g22}, 
		              #{wstd_g31}, 
		              #{wstd_g32}, 
		              #{wstd_g41}, 
		              #{wstd_g42}, 
		              #{wstd_t68}, 
		              #{wstd_t69}, 
		              #{wstd_t70}, 
		              #{wstd_t71}, 
		              #{wstd_t72}, 
		              #{wstd_t73},
					  'B',
					  #{fac_code},
					  #{report_type},
					  #{wstd_nh3},
					  #{wstd_t74},
					  #{wstd_t75},
					  #{wstd_t76},
					  #{wstd_t77},
					  #{wstd_tbd},
					  #{wstd_ttt},
					  #{wstd_tig},
					  #{wstd_thj},
						  #{wstd_gj11},
						  #{wstd_gj12},
						  #{wstd_gj13},
						  #{wstd_gj14},
						  #{wstd_gj15},
						  #{wstd_gj16},
						  #{wstd_gj17},
						  #{wstd_gj18},
						  #{wstd_gj21},
						  #{wstd_gj22},
						  #{wstd_gj23},
						  #{wstd_gj24},
						  #{wstd_gj25},
						  #{wstd_gj26},
						  #{wstd_gj27},
						  #{wstd_gj28},
						  #{wstd_gj31},
						  #{wstd_gj32},
						  #{wstd_gj33},
						  #{wstd_gj34},
						  #{wstd_gj35},
						  #{wstd_gj36},
						  #{wstd_gj37},
						  #{wstd_gj38},
						  #{wstd_gj42},
						  #{wstd_gj43},
						  #{wstd_gj52},
						  #{wstd_gj53},
						  #{wstd_gj62},
						  #{wstd_gj63},
						  #{wstd_gj72},
						  #{wstd_gj73},
						  #{wstd_gj82},
						  #{wstd_gj83},
						  #{wstd_gjsu},
						  #{wstd_gjrpm},
						  #{wstd_gj97},
						  #{wstd_gj98},
						  #{wstd_gj99},
						  #{wstd_gj100},
						  #{wstd_gj101},
						  #{fac_code1},
						  #{fac_code2},
						  #{wstd_t87},
						  #{wstd_gj39},
						  #{wstd_gj44},
						  #{wstd_gj45},
						  #{wstd_gj49},
						  #{wstd_gj54},
						  #{wstd_gj55},
						  #{wstd_gj59},
						  #{wstd_gj64},
						  #{wstd_gj65},
						  #{wstd_gj69},
						  #{wstd_gj74},
						  #{wstd_gj75},
						  #{wstd_gj79},
						  #{wstd_gj84},
						  #{wstd_gj85},
						  #{fac_code3},
						  #{wstd_chim_file_name1},
						  #{wstd_chim_file_name2}
						  						  			    						     			  
		          ) 
	</insert>
	
	
	<update id="chimStandardUpdateSave" parameterType="standard">
    UPDATE WORKSTD
    <set>
        PROD_CODE = #{prod_code},
        WSTD_G25 = #{wstd_g25},
        WSTD_G26 = #{wstd_g26},
        WSTD_G27 = #{wstd_g27},
        WSTD_G33 = #{wstd_g33},
        WSTD_T11 = #{wstd_t11},
        WSTD_T12 = #{wstd_t12},
        WSTD_T13 = #{wstd_t13},
        WSTD_T14 = #{wstd_t14},
        WSTD_T21 = #{wstd_t21},
        WSTD_T22 = #{wstd_t22},
        WSTD_T23 = #{wstd_t23},
        WSTD_T24 = #{wstd_t24},
        WSTD_T30 = #{wstd_t30},
        WSTD_T31 = #{wstd_t31},
        WSTD_T32 = #{wstd_t32},
        WSTD_T33 = #{wstd_t33},
        WSTD_T34 = #{wstd_t34},
        WSTD_N05 = #{wstd_n05},
        WSTD_N06 = #{wstd_n06},
        WSTD_N07 = #{wstd_n07},
        WSTD_WORKNOTE = #{wstd_worknote},
        WSTD_T40 = #{wstd_t40},
        WSTD_T41 = #{wstd_t41},
        WSTD_T42 = #{wstd_t42},
        WSTD_T43 = #{wstd_t43},
        WSTD_T44 = #{wstd_t44},
        WSTD_T50 = #{wstd_t50},
        WSTD_T51 = #{wstd_t51},
        WSTD_T52 = #{wstd_t52},
        WSTD_T53 = #{wstd_t53},
        WSTD_T54 = #{wstd_t54},
        WSTD_N08 = #{wstd_n08},
        WSTD_T55 = #{wstd_t55},
        WSTD_T56 = #{wstd_t56},
        WSTD_T57 = #{wstd_t57},
        WSTD_T58 = #{wstd_t58},
        WSTD_T59 = #{wstd_t59},
        WSTD_T60 = #{wstd_t60},
        WSTD_T61 = #{wstd_t61},
        WSTD_READY = #{wstd_ready},
        WSTD_WORKTIME = #{wstd_worktime},
        WSTD_T62 = #{wstd_t62},
        WSTD_T63 = #{wstd_t63},
        WSTD_T64 = #{wstd_t64},
        WSTD_T65 = #{wstd_t65},
        WSTD_N01 = #{wstd_n01},
        WSTD_N02 = #{wstd_n02},
        WSTD_T66 = #{wstd_t66},
        WSTD_N03 = #{wstd_n03},
        WSTD_N04 = #{wstd_n04},
        WSTD_T67 = #{wstd_t67},
        WSTD_G11 = #{wstd_g11},
        WSTD_G12 = #{wstd_g12},
        WSTD_G21 = #{wstd_g21},
        WSTD_G22 = #{wstd_g22},
        WSTD_G31 = #{wstd_g31},
        WSTD_G32 = #{wstd_g32},
        WSTD_G41 = #{wstd_g41},
        WSTD_G42 = #{wstd_g42},
        WSTD_T68 = #{wstd_t68},
        WSTD_T69 = #{wstd_t69},
        WSTD_T70 = #{wstd_t70},
        WSTD_T71 = #{wstd_t71},
        WSTD_T72 = #{wstd_t72},
        WSTD_T73 = #{wstd_t73},
        WSTD_GUBN = 'B',
        FAC_CODE = #{fac_code},
        REPORT_TYPE = #{report_type},
        WSTD_NH3 = #{wstd_nh3},
        WSTD_T74 = #{wstd_t74},
        WSTD_T75 = #{wstd_t75},
        WSTD_T76 = #{wstd_t76},
        WSTD_T77 = #{wstd_t77},
        WSTD_TBD = #{wstd_tbd},
        WSTD_TTT = #{wstd_ttt},
        WSTD_TIG = #{wstd_tig},
        WSTD_THJ = #{wstd_thj},
        WSTD_GJ11 = #{wstd_gj11},
        WSTD_GJ12 = #{wstd_gj12},
        WSTD_GJ13 = #{wstd_gj13},
        WSTD_GJ14 = #{wstd_gj14},
        WSTD_GJ15 = #{wstd_gj15},
        WSTD_GJ16 = #{wstd_gj16},
        WSTD_GJ17 = #{wstd_gj17},
        WSTD_GJ18 = #{wstd_gj18},
        WSTD_GJ21 = #{wstd_gj21},
        WSTD_GJ22 = #{wstd_gj22},
        WSTD_GJ23 = #{wstd_gj23},
        WSTD_GJ24 = #{wstd_gj24},
        WSTD_GJ25 = #{wstd_gj25},
        WSTD_GJ26 = #{wstd_gj26},
        WSTD_GJ27 = #{wstd_gj27},
        WSTD_GJ28 = #{wstd_gj28},
        WSTD_GJ31 = #{wstd_gj31},
        WSTD_GJ32 = #{wstd_gj32},
        WSTD_GJ33 = #{wstd_gj33},
        WSTD_GJ34 = #{wstd_gj34},
        WSTD_GJ35 = #{wstd_gj35},
        WSTD_GJ36 = #{wstd_gj36},
        WSTD_GJ37 = #{wstd_gj37},
        WSTD_GJ38 = #{wstd_gj38},
        WSTD_GJ42 = #{wstd_gj42},
        WSTD_GJ43 = #{wstd_gj43},
        WSTD_GJ52 = #{wstd_gj52},
        WSTD_GJ53 = #{wstd_gj53},
        WSTD_GJ62 = #{wstd_gj62},
        WSTD_GJ63 = #{wstd_gj63},
        WSTD_GJ72 = #{wstd_gj72},
        WSTD_GJ73 = #{wstd_gj73},
        WSTD_GJ82 = #{wstd_gj82},
        WSTD_GJ83 = #{wstd_gj83},
        WSTD_GJSu = #{wstd_gjsu},
        WSTD_GJRpm = #{wstd_gjrpm},
        WSTD_GJ97 = #{wstd_gj97},
        WSTD_GJ98 = #{wstd_gj98},
        WSTD_GJ99 = #{wstd_gj99},
        WSTD_GJ100 = #{wstd_gj100},
        WSTD_GJ101 = #{wstd_gj101},
        FAC_CODE1 = #{fac_code1},
        FAC_CODE2 = #{fac_code2},
        WSTD_T87 = #{wstd_t87},
        WSTD_GJ39 = #{wstd_gj39},
        WSTD_GJ44 = #{wstd_gj44},
        WSTD_GJ45 = #{wstd_gj45},
        WSTD_GJ49 = #{wstd_gj49},
        WSTD_GJ54 = #{wstd_gj54},
        WSTD_GJ55 = #{wstd_gj55},
        WSTD_GJ59 = #{wstd_gj59},
        WSTD_GJ64 = #{wstd_gj64},
        WSTD_GJ65 = #{wstd_gj65},
        WSTD_GJ69 = #{wstd_gj69},
        WSTD_GJ74 = #{wstd_gj74},
        WSTD_GJ75 = #{wstd_gj75},
        WSTD_GJ79 = #{wstd_gj79},
        WSTD_GJ84 = #{wstd_gj84},
        WSTD_GJ85 = #{wstd_gj85},
        FAC_CODE3 = #{fac_code3},
        <if test="wstd_chim_file_name1 != null">
            WSTD_CHIM_FILE_NAME1 = #{wstd_chim_file_name1},
        </if>
        <if test="wstd_chim_file_name2 != null">
            WSTD_CHIM_FILE_NAME2 = #{wstd_chim_file_name2},
        </if>
        </set> 
    WHERE WSTD_CODE = #{wstd_code}
</update>
	
	
	<delete id="chimStandardDelete" parameterType="int">
    DELETE FROM WORKSTD
    WHERE WSTD_CODE = #{wstd_code}
	</delete>

</mapper>